syntax = "proto3";

package googlekon;

option go_package = "github.com/subiz/header/googlekon";

message GoogleAccount {
	string email = 1;
    repeated string linked_bussiness_profile_id = 2;
	string access_token = 4;
	string refresh_token = 5;
	int64 access_token_expired_at = 6;       
	int64 authorized = 7;
	int64 last_called = 8;
	int64 last_refresh_token_at = 9;
	int64 last_refresh_token_error_at = 10;
	string account_id = 11;
}

message BussinessProfileAccount{
	string bussiness_profile_id = 1;
	string name = 2;
}

message BussinessProfileAccounts {
	repeated BussinessProfileAccount accounts = 1;
	string next_page_token = 2;
}

message Locations {
	repeated Location locations = 1;
	string next_page_token = 2;
	int64 total_size = 3;
}

message Location {
	string location_id = 1;
	string store_code  = 2;
	string title = 3;
	Metadata metadata = 4;
	Profile profile = 5;
	string account_id = 6;
	string email = 7;
	string bussiness_profile_account_id = 8;
	string name = 9;
}

message Metadata {
    string maps_uri = 10;
}

message Profile {
	string description = 1;
}

//Cloud Pub/Sub notification settings for an bussiness profile account 
message NotificationSettings {
	string name = 1;
	string pubsub_topic = 2;
	string notification_type = 3;
	enum NotificationType {
		NOTIFICATION_TYPE_UNSPECIFIED = 0;
		GOOGLE_UPDATE = 1;
		NEW_REVIEW = 2;
		UPDATED_REVIEW = 3;
		NEW_CUSTOMER_MEDIA = 4;
		NEW_QUESTION = 5;
		UPDATED_QUESTION = 6;
		NEW_ANSWER = 7;
		UPDATED_ANSWER = 8;
		DUPLICATE_LOCATION = 9;
		VOICE_OF_MERCHANT_UPDATED = 10;
	}
}

message Review {
	string review_id = 2;
	Reviewer reviewer = 3;

    enum Rating {
		star_rating_unspecified = 0; 
		one = 1;
		two = 2;
		three = 3;
        four = 4;
        five = 5; 
	}
	string star_rating = 4; //rating
	string comment = 5;
	string create_time = 6;
	string update_time = 7;
	ReviewReply review_reply = 8;
	string name = 9;
	string location_id =10;
}

message Reviews {
    repeated Review reviews = 1;
	float avarage_rating = 2;
    int32 total_review_count = 3;
    string next_page_token = 4;
}

message Reviewer {
    string profile_photo_url= 1;
	string display_name = 2;
	bool is_anonymous = 3;
}

message ReviewReply {
    string comment = 1;
	string update_time = 2;
}

message Request {
    repeated string location_names = 1; 
    int32 page_size = 2;
    string page_token = 3;
    string order_by = 4; 
    bool ignore_rating_only_reviews = 5; 
	string update_mask = 6;
	string parent_account = 7;
	string filter = 8;
}

message Response {
	string access_token = 1;
	int32 expires_in = 2;
	string scope = 3;
	string token_type = 4;
}

message GoogleNotiMessage {
	string type = 1;
	string location = 2;
	string review = 3; 
}