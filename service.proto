syntax = "proto3";

package header;

option go_package = "github.com/subiz/header";
import "payment.proto";
import "noti5.proto";
import "account.proto";
import "header.proto";
import "common.proto";
import "zalokon.proto";

service RateLimit {
	rpc SyncRateLimit(RateLimitSyncRequest) returns (RateLimitSyncResponse);
}

service Search {
	rpc Index(header.DocIndexRequest) returns (header.Empty);
	rpc Search(header.DocSearchRequest) returns (header.DocSearchResponse);
	rpc AddOwner(header.DocIndexRequest) returns (header.Empty);
}

service Map {
	rpc Predict(AddressAutocompleteRequest) returns (AddressAutocompleteResponses);
	rpc LookupAddress(Id) returns (Address);
	rpc PredictAddress(AddressAutocompleteRequest) returns (Addresses);

	rpc ListDistricts(Id) returns (Addresses);
	rpc ListProvinces(Id) returns (Addresses); // also city
	rpc ListWards(Id) returns (Addresses); // phuong/xa
	rpc ListStreets(Id) returns (Addresses);
	rpc ListAddresses(Ids) returns (Addresses);
	rpc ReadAddress(Id) returns (Address);
}

service AccountMgr {
	rpc CreateGroup(header.AgentGroup) returns (header.AgentGroup);
	rpc UpdateGroup(header.AgentGroup) returns (header.AgentGroup);
	rpc GetGroup(Id) returns (header.AgentGroup);
	rpc RequestResetPassword(account.ResetPasswordRequest) returns (Empty);
	rpc UpdatePassword(account.NewPassword) returns (account.Agent);
	rpc UpdateAgent(account.Agent) returns (account.Agent);
	rpc DeleteAgent(Id) returns (account.Agent);
	rpc RequestChangeEmail(account.Agent) returns (Empty);// require password
	rpc ConfirmChangeEmail(account.Token) returns (account.Agent);
	rpc AcceptInvitation(account.NewPassword) returns (account.Agent);
	rpc GetInvitation(account.Token) returns (account.Agent);
	rpc InviteAgent(account.Agent) returns (account.Agent); // allow to call multiple time
	rpc GetAgent(Id) returns (account.Agent);
	rpc ConfirmAccount(account.Token) returns (account.Account);
	rpc GetAccount(Id) returns (account.Account);
	rpc UpdateAccount(account.Account) returns (account.Account);
	rpc CreateAccount(account.CreateAccountRequest) returns (account.Account);
	rpc ListAgents(Id) returns (account.Agents);

	rpc DeleteGroup(Id) returns (Empty);
	rpc ListGroups(Id) returns (header.AgentGroups);

	rpc ChangeEmail(account.Agent) returns (account.Agent);
	rpc SyncPublicHolidays(account.SyncPublicHolidaysRequest) returns (account.BusinessHours);
	rpc TransferOwner(Id) returns (account.Agent);

	rpc CheckLoginSession(LoginSession) returns (LoginSession);
	rpc ListLoginSessions(Id) returns (LoginSessions);
	rpc ListApiKeys(Id) returns (LoginSessions);
	rpc LogoutSession(Id) returns (Empty); // can use id or access-token
	rpc CreateApiKey(LoginSession) returns (LoginSession);

	rpc GetLanguage(Id) returns (Lang);
	rpc UpdateLanguage(LangMessage) returns (LangMessage);
	rpc CreateChangelog(header.Changelog) returns (header.Changelog);
	rpc ListChangelogs(header.ListChangelogsRequest) returns (header.ListChangelogsResponse);

	rpc GetShopSetting(header.Id) returns (header.ShopSetting);
	rpc UpdateShopSetting(header.ShopSetting) returns (header.ShopSetting);
	rpc ReadCurrency(header.Id) returns (header.Currency);

	// internal
	rpc AutoSyncCurrency(header.Id) returns (header.Empty);

	rpc ListShopAddresses(Id) returns (header.Addresses);
	rpc CreateShopAddress(header.Address) returns (header.Address);
	rpc UpdateShopAddress(header.Address) returns (header.Address);
	rpc DeleteShopAddress(Id) returns (Empty);

	rpc ListTaxes(Id) returns (header.Taxes);
	rpc CreateTax(header.Tax) returns (header.Tax);
	rpc UpdateTax(header.Tax) returns (header.Tax);
	rpc DeleteTax(Id) returns (Empty);

	rpc CheckShippingPolicy(header.Order) returns (header.ShippingPolicies);
	rpc ListShippingPolicies(Id) returns (header.ShippingPolicies);
	rpc CreateShippingPolicy(header.ShippingPolicy) returns (header.ShippingPolicy);
	rpc UpdateShippingPolicy(header.ShippingPolicy) returns (header.ShippingPolicy);
	rpc DeleteShippingPolicy(Id) returns (Empty);

	rpc CreateCancellationCode(header.CancellationCode) returns (header.CancellationCode);
	rpc ListCancellationCodes(Id) returns (header.CancellationCodes);
	rpc UpdateCancellationCode(header.CancellationCode) returns (header.CancellationCode);

	rpc MakeDefaultTax(Id) returns (Empty);

	rpc ListPaymentMethods(Id) returns (header.PaymentMethods);
	rpc CreatePaymentMethod(header.PaymentMethod) returns (header.PaymentMethod);
	rpc UpdatePaymentMethod(header.PaymentMethod) returns (header.PaymentMethod);
	rpc DeletePaymentMethod(Id) returns (Empty);
	rpc MakeDefaultPaymentMethod(Id) returns (Empty);

	rpc ListIntegratedShippingProviders(Ids) returns (header.IntegratedShippings);
	rpc DeintegrateShippingProvider(header.IntegratedShipping) returns (Empty);
	rpc IntegrateShippingProvider(header.IntegratedShipping) returns (header.IntegratedShipping);
	rpc SendGHNAffiliateOTP(header.IntegratedShipping) returns (header.IntegratedShipping);
	rpc EnterGHNAffiliateOTP(header.IntegratedShipping) returns (header.IntegratedShipping);

	rpc ListEmailBlocks(Ids) returns (header.EmailBlocks);
	rpc CreateEmailBlock(header.EmailBlock) returns (header.EmailBlock);
	rpc DeleteEmailBlock(Id) returns (Empty);

	rpc UpdateAgentPresence (account.Presence) returns (account.Presence);
	rpc ReportAvailibilities(AvailibilityReportRequest) returns (ReportResponse);

	rpc NewID(header.Id) returns (header.Id);
}

// user services
service UserMgr {
	rpc MergeUser(header.Users) returns (header.User);
	rpc DetachUser(header.Id) returns (header.Empty);

	rpc DeleteUser(Id) returns (Empty);

	rpc CreateUser(header.User) returns (Id);
	rpc UpdateUser(header.User) returns (Id);
	rpc UpdateUser2(header.User) returns (header.User);

	rpc RemoveUser(header.Id) returns (header.Empty);
	rpc RestoreUser(header.Id) returns (header.Empty);

	rpc ReadUser(Id) returns (header.User);
	rpc ReadOrCreateUserByContactProfile(Id) returns (header.User);
	rpc MatchUsers(Ids) returns (header.Users);
	rpc BanUser(Id) returns (header.User);
	rpc UnbanUser(Id) returns (header.User);

	rpc LookupByPhone(Id) returns (header.Users);

	rpc UpdateView(header.UserView) returns (header.UserView);
	rpc CreateView(header.UserView) returns (header.UserView);
	rpc DeleteView(Id) returns (Empty);
	rpc GetView(Id) returns (header.UserView);
	rpc ListViews(Id) returns (header.UserViews);

	rpc UpdateSegment(header.Segment) returns (header.Segment);
	rpc CreateSegment(header.Segment) returns (header.Segment);
	rpc DeleteSegment(Id) returns (Empty);
	rpc GetSegment(Id) returns (header.Segment);
	rpc ListSegments(Id) returns (header.Segments);
	rpc ListUsers(header.ListUserRequest) returns (header.Users);
	rpc ListSegmentUserIds(header.ListUserRequest) returns (header.Ids); // deprecating
	rpc ListAllSegmentUsers(header.ListUserRequest) returns (header.Users);
	rpc AddToSegment(header.SegmentUsers) returns (Empty);
	rpc RemoveFromSegment(header.SegmentUsers) returns (Empty);

	rpc UpdateUserCampaignStatus(header.UserCampaign) returns (Empty);

	rpc UpsertLabel(header.Label) returns (header.Label);
	rpc DeleteLabel(Id) returns (Empty);
	rpc ListLabels(Id) returns (header.Labels);
	rpc GetLabel(Id) returns (header.Label);

	rpc AddLeadOwner(UserRequest) returns (Empty);
	rpc RemoveLeadOwner(UserRequest) returns (Empty);
	rpc AddUserLabel(UserRequest) returns (Empty);
	rpc RemoveUserLabel(UserRequest) returns (Empty);

	rpc AddLeadConversionBy(UserRequest) returns (Empty);

	rpc CreateShippingAddress(Address) returns (Address);
	rpc UpdateShippingAddress(Address) returns (Address);
	rpc RemoveShippingAddress(Address) returns (Empty);
	rpc ListShippingAddress(Id) returns (ShippingAddresses);
	rpc MakeDefaultShippingAddress(Address) returns (Empty);

	rpc ListLeads(header.UserView) returns (header.Users);
	rpc SuggestLeadField(header.SuggestLeadFieldRequest) returns (header.SuggestLeadFieldResponse);

	rpc ListSecondaryUsers(Id) returns (Users);
	rpc RecommendRelatedUsers(Id) returns (Users);

	rpc LinkProductUrl(header.Product) returns (header.Product);

	rpc ListUserEvents(header.ListUserEventsRequest) returns (header.Events);
	rpc CreateUserEvent(header.Event) returns (header.Event);
	rpc FillDevice(common.Device) returns (common.Device);

	rpc ImportLead(header.ImportLeadRequest) returns (header.ImportLeadResponse);

	rpc ListEventTypes(header.ListEventTypeRequest) returns (header.EventTypes);
	rpc UpdateEventType(header.EventType) returns (header.EventType);
	rpc LinkTask(header.Task) returns (header.Empty);
}

service LiveMgr {
	rpc SearchLocations(header.LocationParams) returns (header.Locations);
	rpc FilterActiveUsers(header.UserInfoParams) returns (header.Users);

	rpc TopEvents(header.EventParams) returns (header.Events);
	rpc TopLocations(Id) returns (header.LocationMetrics);
	rpc TopPages(Id) returns (header.PageMetrics);
	rpc TopSources(Id) returns (header.SourceMetrics);
	rpc CountActiveUsers(Id) returns (header.UserMetric);
	rpc Presences(header.PresencesRequest) returns (header.PresencesResponse);
}

service NoteMgr {
	rpc ListNotes(header.ListNotesRequest) returns (header.Notes);
	rpc AddNote(header.Note) returns (header.Note);
	rpc UpdateNote(header.Note) returns (header.Note);
	rpc DeleteNote(header.DeleteNoteRequest) returns (Empty);
}

service AttributeMgr {
	rpc ListAttributeDefinitions(Empty) returns (header.AttributeDefinitions);
	rpc CreateAttributeDefinition(header.AttributeDefinition) returns (header.AttributeDefinition);
	rpc UpdateAttributeDefinition(header.AttributeDefinition) returns (header.AttributeDefinition);
}

service ConversationMgr {
	rpc AssignRule(header.AssignRequest) returns (header.RouteResult);
	rpc PongMessage(header.Event) returns (header.Event);

	rpc StartConversation(header.StartRequest) returns (header.Conversation);
	rpc EndConversation(Id) returns (header.Conversation);
	rpc GetConversation(Id) returns (header.Conversation);
	rpc ListConversations(header.ListConversationsRequest) returns (header.Conversations);
	rpc MatchConversations(Ids) returns (header.Conversations);

	rpc TagConversation(header.TagRequest) returns (Empty);
	rpc UntagConversation(header.TagRequest) returns (Empty);

	rpc JoinConversation(header.ConversationMember) returns (Empty);
	rpc LeftConversation(header.ConversationMember) returns (Empty);

	rpc Typing(Id) returns (Empty); // deprecated
	rpc UpdateConversationInfo(header.Conversation) returns (header.Conversation);

	rpc SearchConvos(header.SearchRequest) returns (header.Conversations); // deprecated

	rpc UpdateMuteConversation(header.Conversation) returns (Empty);
	rpc UpdateConversationMember(header.ConversationMember) returns (Empty);
	rpc UnwatchConversation(header.Conversation) returns (Empty);
	rpc UnhiddenConversation(header.Conversation) returns (Empty);

	rpc UpdateEndchatSetting(header.EndchatSetting) returns (header.EndchatSetting);
	rpc GetEndchatSetting(Id) returns (header.EndchatSetting);

	rpc TerminateBot(header.BotTerminated) returns (header.Event);

	rpc SendMessage(header.Event) returns (header.Event);
	rpc SendOmniChannelMessage(header.SendOmniChannelMessageRequest) returns (header.Event);
	rpc UpdateMessage(header.Event) returns (header.Event);
	rpc PinMessage(header.Event) returns (header.Empty);
	rpc UnpinMessage(header.Event) returns (header.Empty);
	rpc ListEvents(header.ListConversationEventsRequest) returns (header.Events);

	rpc Deintegrate(Id) returns (Empty);
	rpc ListIntegrations(Id) returns (header.Integrations);
	rpc Integrate(header.Integration) returns (header.Integration);
	rpc GetIntegration(Id) returns (header.Integration);

	rpc UpdateRule(header.Rule) returns (header.Rule);
	rpc CreateRule(header.Rule) returns (header.Rule);
	rpc DeleteRule(Id) returns (Empty);
	rpc ReadRule(Id) returns (header.Rule);
	rpc ListRules(Id) returns (header.Route);

	rpc ListConversationAutomations(Id) returns (header.ConversationAutomations);
	rpc UpdateConversationAutomation(header.ConversationAutomation) returns (header.ConversationAutomation);
	rpc DeleteConversationAutomation(Id) returns (Empty);
	rpc ReadConversationAutomation(Id) returns (header.ConversationAutomation);

	rpc ListPhoneDevices(header.Id) returns (header.PhoneDevices);
	rpc CreatePhoneDevice(header.PhoneDevice) returns (header.PhoneDevice);
	rpc UpdatePhoneDevice(header.PhoneDevice) returns (header.PhoneDevice);
	rpc DeletePhoneDevice(header.Id) returns (Empty);
	rpc ReadPhoneDevice(header.Id) returns (header.PhoneDevice);

	rpc TestNumber(header.Id) returns (header.Integration);

	rpc ListCallSettings(header.Id) returns (header.CallSettings);
	rpc UpdateCallSetting(header.CallSetting) returns (header.CallSetting);

	rpc BlockNumber(BlockedNumber) returns (BlockedNumber);
	rpc ListBlockedNumbers(Id) returns (BlockedNumbers);
	rpc UnblockNumber(BlockedNumber) returns (Empty);

	rpc ListGreetingAudio(Id) returns (GreetingAudios);
	rpc CreateGreetingAudio(GreetingAudio) returns (GreetingAudio);

	// try to make an outbound call from subiz
	rpc OriginateCall(StartRequest) returns (Conversation);

	rpc ListMyRecentCalls(Id) returns (RecentCallRecords);
	// sync, called from fabikon
	rpc SaveMessage(header.Event) returns (header.Event);
}

service TemplateMgr {
	rpc CreateTemplate(header.Template) returns (header.Template);
	rpc UpdateTemplate(header.Template) returns (header.Template);
	rpc DeleteTemplate(Id) returns (Empty);
	rpc GetTemplate(Id) returns (header.Template);
	rpc ListTemplates(header.SearchTemplate) returns (header.Templates);
	rpc PickTemplate(Id) returns (Empty);

	rpc CreateModal(header.ConversationModal) returns (header.ConversationModal);
	rpc UpdateModal(header.ConversationModal) returns (header.ConversationModal);
	rpc DeleteModal(Id) returns (Empty);
	rpc GetModal(Id) returns (header.ConversationModal);
	rpc ListModals(header.Id) returns (header.ConversationModals);
	rpc PickModal(ConversationModalPickRequest) returns (ConversationModalPicked);
}

service TagMgr {
	rpc CreateTag(header.Tag) returns (header.Tag);
	rpc UpdateTag(header.Tag) returns (header.Tag);
	rpc DeleteTag(Id) returns (Empty);
	rpc ListTags(Id) returns (header.Tags);
	rpc GetTag(Id) returns (header.Tag);
}

// file services
service FileMgr {
	rpc Presign(header.FileHeader) returns (header.PresignResult);
	rpc Uploaded(header.FileRequest) returns (header.File);
	rpc DownloadFileUrl(header.FileUrlDownloadRequest) returns (header.File);
	rpc FileAvatar(header.File) returns (header.File);
}

// noti5 services
service Noti5Service {
	rpc ReadNotificationSetting(Id) returns (noti5.Setting);
	rpc UpdateNotificationSetting(noti5.Setting) returns (noti5.Setting);

	rpc Noti(header.PushNoti) returns (Empty);

	rpc AddToken(noti5.Token) returns (Empty);
	rpc RemoveToken(noti5.Token) returns (Empty);
	rpc CheckTokenExists(noti5.Token) returns (Empty);
}

// payment services
service SubizInternalPaymentMgr {
	rpc CreateBill(payment.Bill) returns (payment.Bill);
}

service PaymentMgr {
	rpc SearchSub(account.SearchSubRequest) returns (account.AccSubs);
	rpc Purchase(payment.Subscription) returns (payment.Invoice);
	rpc UpdateSubscription(payment.Subscription) returns (payment.Subscription);
	rpc GetSubscription(Id) returns (payment.Subscription);
	rpc AddPaymentMethod(payment.PaymentMethod) returns (payment.PaymentMethod);
	rpc UpdatePaymentMethod(payment.PaymentMethod) returns (payment.PaymentMethod);
	rpc DeletePaymentMethod(Id) returns (Empty);
	rpc ListPaymentMethods(Id) returns (payment.PaymentMethods);
	rpc Pay(payment.PayRequest) returns (payment.Bill);
	rpc CreateInvoice(payment.Invoice) returns (payment.Invoice);
	rpc UpdateInvoice(payment.Invoice) returns (payment.Invoice);
	rpc FilterInvoices(payment.ListInvoiceRequest) returns (payment.Invoices);
	rpc DraftInvoice(payment.Subscription) returns (payment.Invoice);
	rpc DiffSubscriptions(payment.DiffSubRequest) returns (payment.Invoice);
	rpc ListComments(payment.ListCommentsRequest) returns (payment.Comments);
	rpc AddComment(payment.Comment) returns (payment.Comment);
	rpc ListPlans(Empty) returns (payment.Plans);
	rpc ExportInvoice(Id) returns (payment.String);
	rpc ConvertInvoiceToHtml(payment.Invoice) returns (payment.String);
	rpc GetExchangeRate(ExchangeRate) returns (ExchangeRate);
	rpc TransferMoney(payment.PayRequest) returns (payment.Bill);
	rpc ListLogs(payment.ListLogsRequest) returns (payment.Logs);

	rpc CreatePromotionCode(payment.PromotionCode) returns (payment.PromotionCode);
	rpc GetPromotionCode(payment.String) returns (payment.PromotionCode);
	rpc UsePromotionCode(payment.PromotionCodeRequest) returns (Empty);
	rpc ValidatePromotionCode(payment.PromotionCodeRequest) returns (payment.PromotionCode);
	rpc ListPromotionCode(payment.ListPromotionCodeRequest) returns (payment.PromotionCodes);
	rpc DeletePromotionCode(Id) returns (Empty);

	rpc SearchReferral(payment.SearchReferredRequest) returns (payment.Referral);
	rpc GetReferral(Id) returns (payment.Referral);
	rpc ListTopReferral(Empty) returns (payment.ReferralResponse);
	rpc UpdateReferral(payment.Referral) returns (payment.Referral);
	rpc ListAccountReferred(Id) returns (payment.LogAccountReferreds);
	rpc ListBillByAccountReferred(Id) returns (payment.LogBillByAccountReferreds);
	rpc ListPaidForAgentReferrer(Id) returns (payment.LogPaidForAgentReferrers);
	rpc PaidForAgentReferrer(payment.LogPaidForAgentReferrer) returns (Empty);
}

// pubsub services
service Pubsub {
	rpc Publish(header.PublishMessage) returns (Empty);
}

service FabikonService {
	rpc ReadFbFanpageSetting(Id) returns (header.FbFanpageSetting);
	rpc UpdateFbFanpageSetting(header.FbFanpageSetting) returns (header.FbFanpageSetting);
	rpc ListFbFanpageSettings(Id) returns (header.FbFanpageSettings);

	rpc ListFbPosts(Id) returns (header.FacebookPosts);
	rpc GetFbPost(FacebookPost) returns (FacebookPost);
	rpc SendEventToFacebook(header.Events) returns (header.Empty); // messenger, facebook_comment, instagram
}

service ZalokonService {
	rpc SendEventToZalo(header.Events) returns (header.Empty); // zalo
	rpc ListZnsTemplates(Id) returns (zalokon.ZnsTemplates);
	rpc RequestZaloUserInfo(header.ZaloUserInfoRequest) returns (header.Empty);
	rpc SendZns(header.ZnsRequest) returns (header.Empty);
}

service MailkonService {
	rpc SendEmail(header.Events) returns (header.Empty); // mailkon
	// rpc ListBlockedEmails(Id) returns (Empty);
	// rpc BlockEmail(Id) returns (Empty);
	// rpc UnblockEmail(Id) returns (Empty);

	rpc UpsertEmailDomain(header.Integration) returns (header.Integration);
	rpc SendVerifyEmail(header.Id) returns (header.Empty); // send SES email to user
}

// widget services
service WidgetService {
	rpc Read(Id) returns (header.WidgetSetting);
	rpc Update(header.WidgetSetting) returns (header.WidgetSetting);
	rpc ReadUserSetting(Id) returns (header.WidgetUserSetting);

	rpc ReadAccountSetting(Id) returns (header.AccountWeb);

	rpc SubmitImpression(header.Impression) returns (header.Impression);
	rpc SubmitConversion(header.Conversion) returns (header.Conversion);
	rpc SubmitUserCampaignStatus(header.UserCampaignStatus) returns (header.UserCampaignStatus); // replace

	rpc ReportCampaign(header.ReportCampaignRequest) returns (header.ReportCampaignResponse); // remove
	rpc ListConversions(header.ConversionRequest) returns (header.Conversions);
	rpc ExportConversions(header.ConversionRequest) returns (header.ConversionsExported);

	rpc UploadImage(header.UploadedImage) returns (header.UploadedImage);
	rpc ListUploadedImage(Id) returns (header.UploadedImages);
	rpc DeleteUploadedImage(header.UploadedImage) returns (Empty);

	rpc ListWebPlugins(Id) returns (WebPlugins);
	rpc UpdateWebPlugin(WebPlugin) returns (WebPlugin);
	rpc UpdateWebPluginEnabled(WebPlugin) returns (WebPlugin);
	rpc CreateWebPlugin(WebPlugin) returns (WebPlugin);
	rpc DeleteWebPlugin(Id) returns (Empty);

	rpc UpdateWebPluginTemplate(header.WebPlugin) returns (header.WebPlugin);
	rpc ListWebPluginTemplates(Id) returns (header.WebPlugins);
	rpc DeleteWebPluginTemplate(Id) returns (Empty);

	rpc ReportWebPlugin(header.ReportWebPluginRequest) returns (header.ReportWebPluginResponse);

	rpc SearchImages(Id) returns (header.UploadedImages);
	rpc ListNotifProfiles(Id) returns (header.NotifProfiles);
	rpc ListNotifBackgrounds(Id) returns (header.Urls);
}

// bizbot services
service Bizbot {
	rpc ListBots(header.BotsRequest) returns (header.Bots);
	rpc GetBot(Id) returns (header.Bot);
	rpc UpdateBotRunState(header.Bot) returns (header.Bot);
	rpc CreateBot(header.Bot) returns (header.Bot);
	rpc UpdateBot(header.Bot) returns (header.Bot);
	rpc DeleteBot(Id) returns (Empty);
	rpc OnEvent(header.BotRunRequest) returns (Empty);
	rpc StartBot(header.BotRunRequest) returns (Empty);
	rpc StopBot(header.BotRunRequest) returns (Empty);
	rpc TryAction(header.BotRunRequest) returns (Empty);
	rpc ReportBot2(header.BotrunMetricsRequest) returns (header.BotrunMetrics);
	rpc ReportAction(header.ActionrunMetricsRequest) returns (header.ActionrunMetrics);

	rpc ListObjects(header.ListObjectsRequest) returns (header.ListObjectsResponse);
	rpc ReportBot(header.ReportBotRequest) returns (header.ReportBotResponse);
}

// sendback services
service Sendback {
	rpc CreateWebhook(header.Webhook) returns (header.Webhook);
	rpc PingWebhook(Id) returns (header.WebhookTestResult);
	rpc DeleteWebhook(Id) returns (Empty);
	rpc ListWebhooks(Id) returns (header.Webhooks);
	rpc ReadWebhook(Id) returns (header.Webhook);
	rpc UpdateWebhook(header.Webhook) returns (header.Webhook);
	rpc UpdateWebhookSecret(Id) returns (header.Webhook);
	rpc ListRecentIndexDeliveries(header.RecentIndexDeliveryRequest) returns (header.WebhookDeliveries);
	rpc GetDelivery(header.DeliveryRequest) returns (header.WebhookDelivery);

	rpc SendWebhookEvent(header.Event) returns (Empty);
}

// notibox services
service Notibox {
	rpc SendNoti(header.Notification) returns (Empty);
	rpc ListNoties(header.ListNotiRequest) returns (header.Notifications);
	rpc MarkReadNoti(Id) returns (Empty);
	rpc MarkReadNotiTopic(Id) returns (Empty);
}

// watchhttp services
service Watchhttp {
	rpc CreateWebpage(header.Webpage) returns (header.Webpage);
	rpc DeleteWebpage(Id) returns (Empty);
	rpc ListWebpages(Id) returns (header.Webpages);
	rpc UpdateWebpage(header.Webpage) returns (header.Webpage);
	rpc ReadWebpage(Id) returns (header.Webpage);
	rpc ListRecentWebpageChecks(header.RecentWebpageCheckRequest) returns (header.WebpageChecks);
	rpc ReadWebpageCheck(header.WebpageCheckRequest) returns (header.WebpageCheck);
	rpc ReportWebpageChecks(header.WebpageReportRequest) returns (header.WebpageReportDataSet);
	rpc SummaryWebpageChecks(header.WebpageReportRequest) returns (header.WebpageChecks);
}

// holap services
service Holap {
	rpc AppendAgentSet(account.Agent) returns (Empty);
	rpc AppendTagSet(header.Tag) returns (Empty);
	rpc UpdateUser(header.User) returns (Empty);
	rpc UpdateConversation(header.Conversation) returns (Empty);
	rpc OnConversationEvent(header.Event) returns (Empty);
	rpc FreeAccount(header.AccountImage) returns (Empty);
	rpc ReportUser(header.UserMetricsRequest) returns (header.UserMetrics);
	rpc ReportConversation(header.ConversationMetricsRequest) returns (header.ConversationMetrics);
	rpc ListUserIds(header.UserMetricsRequest) returns (header.Ids);
	rpc ListConversationIds(header.ConversationMetricsRequest) returns (header.Conversations);
	rpc ReportAgent(header.AgentMetricsRequest) returns (header.AgentMetrics);
	rpc ListChannelTouchpoints(header.Ids) returns (header.Ids);
	rpc ReportUserEvent(header.UserEventMetricsRequest) returns (header.UserEventMetrics);
	rpc UpdateOrder(header.Order) returns (Empty);
	rpc ReportOrder(header.OrderMetricsRequest) returns (header.Orders);
	rpc ReportCall(header.CallMetricsRequest) returns (header.CallMetrics);
	rpc ListCallIds(header.CallMetricsRequest) returns (header.Conversations);
}

// proder services
service Proder {
	rpc ReadProduct(header.Product) returns (header.Product);
	rpc CreateProduct(header.Product) returns (header.Product);
	rpc UpdateProduct(header.Product) returns (header.Product);
	rpc DeleteProduct(Id) returns (Empty);
	rpc RestoreProduct(Id) returns (header.Product);
	rpc ListProducts(ProductsRequest) returns (header.Products);
	rpc ListProductIds(Ids) returns (Ids);
	rpc ListGroupedProducts(ProductsRequest) returns (header.Products);
	rpc ImportProducts(header.Products) returns (header.Products);

	rpc ListProductCollections(Ids) returns (header.ProductCollections);
	rpc CreateProductCollection(ProductCollection) returns (ProductCollection);
	rpc UpdateProductCollection(ProductCollection) returns (ProductCollection);
	rpc DeleteProductCollection(Id) returns (Empty);

	rpc ListProductFeeds(Id) returns (header.ProductFeeds);
	rpc CreateProductFeed(header.ProductFeed) returns (header.ProductFeed);
	rpc UpdateProductFeed(header.ProductFeed) returns (header.ProductFeed);
	rpc DeleteProductFeed(Id) returns (Empty);

	rpc ListProductCategories(Ids) returns (header.ProductCategories);
	rpc ListProductProps(Ids) returns (header.ProductProps);

	rpc ReadOrder(header.Id) returns (header.Order);
	rpc CreateOrder(header.Order) returns (header.Order);
	rpc UpdateOrder(header.Order) returns (header.Order);

	rpc DeleteOrder(header.Id) returns (header.Empty); // soft delete, mark as deleted
	rpc RestoreOrder(header.Id) returns (header.Order);
	rpc ListOrders(header.OrdersRequest) returns (header.Orders);
	rpc CountOrders(header.OrdersRequest) returns (header.Orders);
	rpc DeleteDraftOrders(header.DeleteDraftOrdersRequest) returns (header.Empty);
	rpc ImportOrders(header.Orders) returns (header.Orders);

	// fire order_updated, order_event_updated
	rpc MakeOrderPayment(header.Bill) returns (header.Event);
	rpc DeleteOrderPayment(header.Key) returns (header.Event);
	rpc AddOrderComment(header.Event) returns (header.Event);
	rpc EditOrderComment(header.Event) returns (header.Event);
	rpc DeleteOrderComment(header.Key) returns (header.Event);
	rpc ListOrderEvents(header.Id) returns (header.OrderHistoryEntries);

	rpc DownloadOrder(header.DownloadOrderRequest) returns (header.File);
	rpc GetShopeeAuthUrl(header.Id) returns (header.Id);
	rpc AuthorizeShopeeShop(header.AuthorizeShopeeRequest) returns (header.ShopeeShop);
	rpc DeauthorizeShopeeShop(header.Id) returns (header.Empty);

	rpc SyncShopeeProducts(header.ShopeeSyncProductRequest) returns (header.ShopeeSyncProductResponse);

	rpc GHTKShippingStatus(header.GHTKOrder) returns (Empty);
	rpc GHNShippingStatus(header.GHNOrder2) returns (Empty);
	rpc ShippingFee(header.ShippingInfo) returns (header.ShippingInfo);
	rpc ShipOrder(header.Id) returns (header.Order);
	rpc UpdateShippingCode(header.Order) returns (header.Order);
	rpc CancelShippingOrder(header.Id) returns (header.Order);
	rpc PrintShippingOrders(header.Ids) returns (header.File);

	// rpc UpdateOrderPipelineStage(header.OrderPipelineStage) returns (header.Order); // trigger stage automation
	// used to update tasks and agent id

	rpc SeenOrder(header.Id) returns (Empty);
	rpc FollowOrder(header.Id) returns (Empty);
	rpc UnfollowOrder(header.Id) returns (Empty);
	rpc TagOrder(header.TagRequest) returns (Empty);
	rpc UntagOrder(header.TagRequest) returns (Empty);
}

service Apiece {
	rpc ReadTask(header.Id) returns (header.Task);
	rpc CreateTask(header.Task) returns (header.Task);
	rpc UpdateTask(header.Task) returns (header.Task);
	rpc DeleteTask(Id) returns (Empty);
	rpc ListTasks(header.TasksRequest) returns (header.Tasks);
	rpc SeenTask(header.Id) returns (Empty);
	rpc CloseTaskReminder(header.Id) returns (Empty);

	rpc MuteTask(header.Id) returns (Empty);
	rpc UnmuteTask(header.Id) returns (Empty);

	rpc AddTaskComment(header.Event) returns (header.Event);
	rpc EditTaskComment(header.Event) returns (header.Event);
	rpc DeleteTaskComment(header.Key) returns (header.Event);
	rpc ListTaskComments(header.Id) returns (header.TaskHistoryEntries);

	rpc ReadPipeline(header.Id) returns (header.Pipeline);
	rpc CreatePipeline(header.Pipeline) returns (header.Pipeline);
	rpc UpdatePipeline(header.Pipeline) returns (header.Pipeline);
	rpc DeletePipeline(Id) returns (Empty);
	rpc ListPipelines(Ids) returns (header.Pipelines);
	rpc DeletePipelineStage(header.PipelineStage) returns (Empty);
	rpc PreselectPipeline(Id) returns (header.Pipeline);
}

service Speex {
	rpc TextToSpeech(header.TTSVoiceSelection) returns (header.TTSVoiceSelection);
}

service Campion {
	rpc ListCampaigns(Ids) returns (header.Campaigns);
	rpc ReadCampaign(Id) returns (header.Campaign);
	rpc CreateCampaign(header.Campaign) returns (header.Campaign);
	rpc UpdateCampaign(header.Campaign) returns (header.Campaign);
	rpc DeleteCampaign(Id) returns (Empty);
	rpc OnEvent(header.Event) returns (Empty);
	rpc ListCampaignSendMessages(header.CampaignSendMessagesRequest) returns (header.CampaignSendMessages);
}
